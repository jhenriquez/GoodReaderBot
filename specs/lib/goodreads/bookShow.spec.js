const chai     = require('chai');
const nock     = require('nock');
const BookShow = require('../../../lib/goodreads/bookShow');

function mockGoodreadsResponse () {
  nock('https://www.goodreads.com:443', {"encodedQueryParams":true})
  .get('/book/show/50.xml')
  .query({ "key": process.env.GOODREADS_API_KEY })
  .reply(200, `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<GoodreadsResponse>\n  <Request>\n    <authentication>true</authentication>\n      <key><![CDATA[process.env.GOODREADS_API_KEY]]></key>\n    <method><![CDATA[book_show]]></method>\n  </Request>\n  <book>\n  <id>50</id>\n  <title>Hatchet (Brian&apos;s Saga, #1)</title>\n  <isbn><![CDATA[0689840926]]></isbn>\n  <isbn13><![CDATA[9780689840920]]></isbn13>\n  <asin><![CDATA[]]></asin>\n  <kindle_asin><![CDATA[]]></kindle_asin>\n  <marketplace_id><![CDATA[]]></marketplace_id>\n  <country_code><![CDATA[DO]]></country_code>\n  <image_url>https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png</image_url>\n  <small_image_url>https://s.gr-assets.com/assets/nophoto/book/50x75-a91bf249278a81aabab721ef782c4a74.png</small_image_url>\n  <publication_year></publication_year>\n  <publication_month></publication_month>\n  <publication_day></publication_day>\n  <publisher>Atheneum Books for Young Readers: Richard Jackson Books</publisher>\n  <language_code>en-US</language_code>\n  <is_ebook>false</is_ebook>\n  <description><![CDATA[Brian is on his way to Canada to visit his estranged father when the pilot of his small prop plane suffers a heart attack. Brian is forced to crash-land the plane in a lake--and finds himself stranded in the remote Canadian wilderness with only his clothing and the hatchet his mother gave him as a present before his departure. <br /><br />Brian had been distraught over his parents' impending divorce and the secret he carries about his mother, but now he is truly desolate and alone. Exhausted, terrified, and hungry, Brian struggles to find food and make a shelter for himself. He has no special knowledge of the woods, and he must find a new kind of awareness and patience as he meets each day's challenges. Is the water safe to drink? Are the berries he finds poisonous? <br /><br />Slowly, Brian learns to turn adversity to his advantage--an invading porcupine unexpectedly shows him how to make fire, a devastating tornado shows him how to retrieve supplies from the submerged airplane. Most of all, Brian leaves behind the self-pity he has felt about his predicament as he summons the courage to stay alive. <br /><br />A story of survival and of transformation, this riveting book has sparked many a reader's interest in venturing into the wild.]]></description>\n  <work>\n  <id type=\"integer\">1158125</id>\n  <books_count type=\"integer\">90</books_count>\n  <best_book_id type=\"integer\">50</best_book_id>\n  <reviews_count type=\"integer\">286952</reviews_count>\n  <ratings_sum type=\"integer\">831913</ratings_sum>\n  <ratings_count type=\"integer\">226408</ratings_count>\n  <text_reviews_count type=\"integer\">10150</text_reviews_count>\n  <original_publication_year type=\"integer\">1986</original_publication_year>\n  <original_publication_month type=\"integer\">11</original_publication_month>\n  <original_publication_day type=\"integer\">1</original_publication_day>\n  <original_title>Hatchet</original_title>\n  <original_language_id type=\"integer\" nil=\"true\"/>\n  <media_type>book</media_type>\n  <rating_dist>5:63418|4:71435|3:57808|2:21912|1:11835|total:226408</rating_dist>\n  <desc_user_id type=\"integer\">5843106</desc_user_id>\n  <default_chaptering_book_id type=\"integer\" nil=\"true\"/>\n  <default_description_language_code nil=\"true\"/>\n</work>\n  <average_rating>3.67</average_rating>\n  <num_pages><![CDATA[]]></num_pages>\n  <format><![CDATA[]]></format>\n  <edition_information><![CDATA[]]></edition_information>\n  <ratings_count><![CDATA[217368]]></ratings_count>\n  <text_reviews_count><![CDATA[9107]]></text_reviews_count>\n  <url><![CDATA[https://www.goodreads.com/book/show/50.Hatchet]]></url>\n  <link><![CDATA[https://www.goodreads.com/book/show/50.Hatchet]]></link>\n  <authors>\n<author>\n<id>18</id>\n<name>Gary Paulsen</name>\n<role></role>\n<image_url nophoto='false'>\n<![CDATA[https://images.gr-assets.com/authors/1309159225p5/18.jpg]]>\n</image_url>\n<small_image_url nophoto='false'>\n<![CDATA[https://images.gr-assets.com/authors/1309159225p2/18.jpg]]>\n</small_image_url>\n<link><![CDATA[https://www.goodreads.com/author/show/18.Gary_Paulsen]]></link>\n<average_rating>3.75</average_rating>\n<ratings_count>360551</ratings_count>\n<text_reviews_count>24955</text_reviews_count>\n</author>\n</authors>\n\n    <reviews_widget>\n      <![CDATA[\n        <style>\n  #goodreads-widget {\n    font-family: georgia, serif;\n    padding: 18px 0;\n    width:565px;\n  }\n  #goodreads-widget h1 {\n    font-weight:normal;\n    font-size: 16px;\n    border-bottom: 1px solid #BBB596;\n    margin-bottom: 0;\n  }\n  #goodreads-widget a {\n    text-decoration: none;\n    color:#660;\n  }\n  iframe{\n    background-color: #fff;\n  }\n  #goodreads-widget a:hover { text-decoration: underline; }\n  #goodreads-widget a:active {\n    color:#660;\n  }\n  #gr_footer {\n    width: 100%;\n    border-top: 1px solid #BBB596;\n    text-align: right;\n  }\n  #goodreads-widget .gr_branding{\n    color: #382110;\n    font-size: 11px;\n    text-decoration: none;\n    font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  }\n</style>\n<div id=\"goodreads-widget\">\n  <div id=\"gr_header\"><h1><a href=\"https://www.goodreads.com/book/show/50.Hatchet\">Hatchet Reviews</a></h1></div>\n  <iframe id=\"the_iframe\" src=\"https://www.goodreads.com/api/reviews_widget_iframe?did=DEVELOPER_ID&amp;format=html&amp;isbn=0689840926&amp;links=660&amp;min_rating=&amp;review_back=fff&amp;stars=000&amp;text=000\" width=\"565\" height=\"400\" frameborder=\"0\"></iframe>\n  <div id=\"gr_footer\">\n    <a class=\"gr_branding\" target=\"_blank\" href=\"https://www.goodreads.com/book/show/50.Hatchet?utm_medium=api&amp;utm_source=reviews_widget\">Reviews from Goodreads.com</a>\n  </div>\n</div>\n\n      ]]>\n    </reviews_widget>\n  <popular_shelves>\n      <shelf name=\"to-read\" count=\"30393\"/>\n      <shelf name=\"young-adult\" count=\"2081\"/>\n      <shelf name=\"currently-reading\" count=\"2029\"/>\n      <shelf name=\"fiction\" count=\"1539\"/>\n      <shelf name=\"adventure\" count=\"908\"/>\n      <shelf name=\"favorites\" count=\"862\"/>\n      <shelf name=\"classics\" count=\"699\"/>\n      <shelf name=\"ya\" count=\"666\"/>\n      <shelf name=\"survival\" count=\"631\"/>\n      <shelf name=\"childrens\" count=\"600\"/>\n      <shelf name=\"realistic-fiction\" count=\"511\"/>\n      <shelf name=\"school\" count=\"464\"/>\n      <shelf name=\"childhood\" count=\"446\"/>\n      <shelf name=\"children\" count=\"355\"/>\n      <shelf name=\"middle-grade\" count=\"314\"/>\n      <shelf name=\"children-s\" count=\"313\"/>\n      <shelf name=\"children-s-books\" count=\"279\"/>\n      <shelf name=\"books-i-own\" count=\"271\"/>\n      <shelf name=\"kids\" count=\"268\"/>\n      <shelf name=\"read-for-school\" count=\"246\"/>\n      <shelf name=\"owned\" count=\"222\"/>\n      <shelf name=\"series\" count=\"201\"/>\n      <shelf name=\"newbery\" count=\"179\"/>\n      <shelf name=\"childhood-favorites\" count=\"178\"/>\n      <shelf name=\"classic\" count=\"164\"/>\n      <shelf name=\"for-school\" count=\"160\"/>\n      <shelf name=\"school-books\" count=\"157\"/>\n      <shelf name=\"juvenile\" count=\"151\"/>\n      <shelf name=\"childrens-books\" count=\"150\"/>\n      <shelf name=\"middle-school\" count=\"141\"/>\n      <shelf name=\"teen\" count=\"140\"/>\n      <shelf name=\"kids-books\" count=\"137\"/>\n      <shelf name=\"childhood-books\" count=\"134\"/>\n      <shelf name=\"coming-of-age\" count=\"128\"/>\n      <shelf name=\"hatchet\" count=\"127\"/>\n      <shelf name=\"youth\" count=\"122\"/>\n      <shelf name=\"children-s-lit\" count=\"108\"/>\n      <shelf name=\"novels\" count=\"108\"/>\n      <shelf name=\"children-s-literature\" count=\"107\"/>\n      <shelf name=\"ya-fiction\" count=\"101\"/>\n      <shelf name=\"read-in-school\" count=\"98\"/>\n      <shelf name=\"action-adventure\" count=\"97\"/>\n      <shelf name=\"juvenile-fiction\" count=\"97\"/>\n      <shelf name=\"newbery-honor\" count=\"96\"/>\n      <shelf name=\"owned-books\" count=\"90\"/>\n      <shelf name=\"ya-lit\" count=\"84\"/>\n      <shelf name=\"wilderness\" count=\"84\"/>\n      <shelf name=\"childhood-reads\" count=\"83\"/>\n      <shelf name=\"gary-paulsen\" count=\"83\"/>\n      <shelf name=\"canada\" count=\"81\"/>\n      <shelf name=\"chapter-books\" count=\"80\"/>\n      <shelf name=\"library\" count=\"80\"/>\n      <shelf name=\"audiobook\" count=\"80\"/>\n      <shelf name=\"young-adult-fiction\" count=\"77\"/>\n      <shelf name=\"contemporary\" count=\"75\"/>\n      <shelf name=\"read-as-a-kid\" count=\"73\"/>\n      <shelf name=\"audio\" count=\"72\"/>\n      <shelf name=\"childrens-lit\" count=\"67\"/>\n      <shelf name=\"realistic\" count=\"64\"/>\n      <shelf name=\"school-reads\" count=\"62\"/>\n      <shelf name=\"default\" count=\"62\"/>\n      <shelf name=\"classroom-library\" count=\"61\"/>\n      <shelf name=\"general-fiction\" count=\"57\"/>\n      <shelf name=\"nature\" count=\"56\"/>\n      <shelf name=\"contemporary-realistic-fiction\" count=\"56\"/>\n      <shelf name=\"books\" count=\"56\"/>\n      <shelf name=\"re-read\" count=\"54\"/>\n      <shelf name=\"my-books\" count=\"54\"/>\n      <shelf name=\"newberry\" count=\"52\"/>\n      <shelf name=\"novel\" count=\"47\"/>\n      <shelf name=\"5th-grade\" count=\"47\"/>\n      <shelf name=\"6th-grade\" count=\"46\"/>\n      <shelf name=\"my-childhood\" count=\"45\"/>\n      <shelf name=\"ya-books\" count=\"45\"/>\n      <shelf name=\"audiobooks\" count=\"45\"/>\n      <shelf name=\"elementary-school\" count=\"44\"/>\n      <shelf name=\"action\" count=\"43\"/>\n      <shelf name=\"to-re-read\" count=\"42\"/>\n      <shelf name=\"award-winners\" count=\"42\"/>\n      <shelf name=\"children-s-fiction\" count=\"42\"/>\n      <shelf name=\"childrens-fiction\" count=\"41\"/>\n      <shelf name=\"required-reading\" count=\"41\"/>\n      <shelf name=\"shelfari-favorites\" count=\"40\"/>\n      <shelf name=\"kid-books\" count=\"40\"/>\n      <shelf name=\"childrens-literature\" count=\"40\"/>\n      <shelf name=\"school-reading\" count=\"40\"/>\n      <shelf name=\"kid-lit\" count=\"40\"/>\n      <shelf name=\"elementary\" count=\"39\"/>\n      <shelf name=\"borrowed\" count=\"39\"/>\n      <shelf name=\"to-buy\" count=\"38\"/>\n      <shelf name=\"my-library\" count=\"38\"/>\n      <shelf name=\"i-own\" count=\"38\"/>\n      <shelf name=\"divorce\" count=\"38\"/>\n      <shelf name=\"read-aloud\" count=\"38\"/>\n      <shelf name=\"animals\" count=\"37\"/>\n      <shelf name=\"middle-grades\" count=\"37\"/>\n      <shelf name=\"boys\" count=\"37\"/>\n      <shelf name=\"young-adult-books\" count=\"37\"/>\n      <shelf name=\"contemporary-fiction\" count=\"36\"/>\n      <shelf name=\"tween\" count=\"36\"/>\n  </popular_shelves>\n  <book_links>\n    <book_link>\n  <id>8</id>\n  <name>Libraries</name>\n  <link>https://www.goodreads.com/book_link/follow/8</link>\n</book_link>\n\n  </book_links>\n  <buy_links>\n    <buy_link>\n<id>1</id>\n<name>Amazon</name>\n<link>https://www.goodreads.com/book_link/follow/1</link>\n</buy_link>\n<buy_link>\n<id>10</id>\n<name>Audible</name>\n<link>https://www.goodreads.com/book_link/follow/10</link>\n</buy_link>\n<buy_link>\n<id>3</id>\n<name>Barnes &amp; Noble</name>\n<link>https://www.goodreads.com/book_link/follow/3</link>\n</buy_link>\n<buy_link>\n<id>1027</id>\n<name>Kobo</name>\n<link>https://www.goodreads.com/book_link/follow/1027</link>\n</buy_link>\n<buy_link>\n<id>2102</id>\n<name>Apple iBooks</name>\n<link>https://www.goodreads.com/book_link/follow/2102</link>\n</buy_link>\n<buy_link>\n<id>8036</id>\n<name>Google Play</name>\n<link>https://www.goodreads.com/book_link/follow/8036</link>\n</buy_link>\n<buy_link>\n<id>4</id>\n<name>Abebooks</name>\n<link>https://www.goodreads.com/book_link/follow/4</link>\n</buy_link>\n<buy_link>\n<id>882</id>\n<name>Book Depository</name>\n<link>https://www.goodreads.com/book_link/follow/882</link>\n</buy_link>\n<buy_link>\n<id>9</id>\n<name>Indigo</name>\n<link>https://www.goodreads.com/book_link/follow/9</link>\n</buy_link>\n<buy_link>\n<id>2</id>\n<name>Half.com</name>\n<link>https://www.goodreads.com/book_link/follow/2</link>\n</buy_link>\n<buy_link>\n<id>5</id>\n<name>Alibris</name>\n<link>https://www.goodreads.com/book_link/follow/5</link>\n</buy_link>\n<buy_link>\n<id>107</id>\n<name>Better World Books</name>\n<link>https://www.goodreads.com/book_link/follow/107</link>\n</buy_link>\n<buy_link>\n<id>7</id>\n<name>IndieBound</name>\n<link>https://www.goodreads.com/book_link/follow/7</link>\n</buy_link>\n\n  </buy_links>\n  <series_works>\n    <series_work>\n<id>268218</id>\n<user_position>1</user_position>\n<series>\n<id>62223</id>\n<title>\n<![CDATA[\n    Brian's Saga\n]]>\n</title>\n<description>\n<![CDATA[\n]]>\n</description>\n<note>\n<![CDATA[\n]]>\n</note>\n<series_works_count>8</series_works_count>\n<primary_work_count>5</primary_work_count>\n<numbered>true</numbered>\n</series>\n\n</series_work>\n\n  </series_works>\n  <similar_books>\n          <book>\n<id>41667</id>\n<title><![CDATA[My Side of the Mountain (Mountain, #1)]]></title>\n<title_without_series>My Side of the Mountain</title_without_series>\n<link><![CDATA[https://www.goodreads.com/book/show/41667.My_Side_of_the_Mountain]]></link>\n<small_image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/50x75-a91bf249278a81aabab721ef782c4a74.png]]></small_image_url>\n<image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png]]></image_url>\n<num_pages>192</num_pages>\n<work>\n<id>2682098</id>\n</work>\n<isbn>0142401110</isbn>\n<isbn13>9780142401118</isbn13>\n<average_rating>4.03</average_rating>\n<ratings_count>49600</ratings_count>\n<publication_year>2004</publication_year>\n<publication_month>4</publication_month>\n<publication_day>12</publication_day>\n<authors>\n<author>\n<id>23509</id>\n<name>Jean Craighead George</name>\n<link><![CDATA[https://www.goodreads.com/author/show/23509.Jean_Craighead_George]]></link>\n</author>\n</authors>\n</book>\n\n          <book>\n<id>438131</id>\n<title>Incident at Hawk&apos;s Hill</title>\n<title_without_series>Incident at Hawk&apos;s Hill</title_without_series>\n<link><![CDATA[https://www.goodreads.com/book/show/438131.Incident_at_Hawk_s_Hill]]></link>\n<small_image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/50x75-a91bf249278a81aabab721ef782c4a74.png]]></small_image_url>\n<image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png]]></image_url>\n<num_pages>224</num_pages>\n<work>\n<id>1416354</id>\n</work>\n<isbn>0316209481</isbn>\n<isbn13>9780316209489</isbn13>\n<average_rating>3.98</average_rating>\n<ratings_count>2076</ratings_count>\n<publication_year>1995</publication_year>\n<publication_month>4</publication_month>\n<publication_day>1</publication_day>\n<authors>\n<author>\n<id>59419</id>\n<name>Allan W. Eckert</name>\n<link><![CDATA[https://www.goodreads.com/author/show/59419.Allan_W_Eckert]]></link>\n</author>\n</authors>\n</book>\n\n          <book>\n<id>124245</id>\n<title>The Black Pearl</title>\n<title_without_series>The Black Pearl</title_without_series>\n<link><![CDATA[https://www.goodreads.com/book/show/124245.The_Black_Pearl]]></link>\n<small_image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/50x75-a91bf249278a81aabab721ef782c4a74.png]]></small_image_url>\n<image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png]]></image_url>\n<num_pages>112</num_pages>\n<work>\n<id>811487</id>\n</work>\n<isbn>0440228867</isbn>\n<isbn13>9780440228868</isbn13>\n<average_rating>3.46</average_rating>\n<ratings_count>4729</ratings_count>\n<publication_year>1999</publication_year>\n<publication_month>5</publication_month>\n<publication_day>11</publication_day>\n<authors>\n<author>\n<id>4999</id>\n<name>Scott O&apos;Dell</name>\n<link><![CDATA[https://www.goodreads.com/author/show/4999.Scott_O_Dell]]></link>\n</author>\n</authors>\n</book>\n\n          <book>\n<id>13164526</id>\n<title>The Sign of the Beaver</title>\n<title_without_series>The Sign of the Beaver</title_without_series>\n<link><![CDATA[https://www.goodreads.com/book/show/13164526-the-sign-of-the-beaver]]></link>\n<small_image_url><![CDATA[https://images.gr-assets.com/books/1355145685s/13164526.jpg]]></small_image_url>\n<image_url><![CDATA[https://images.gr-assets.com/books/1355145685m/13164526.jpg]]></image_url>\n<num_pages></num_pages>\n<work>\n<id>1282066</id>\n</work>\n<isbn></isbn>\n<isbn13></isbn13>\n<average_rating>3.76</average_rating>\n<ratings_count>25034</ratings_count>\n<publication_year></publication_year>\n<publication_month></publication_month>\n<publication_day></publication_day>\n<authors>\n<author>\n<id>7549</id>\n<name>Elizabeth George Speare</name>\n<link><![CDATA[https://www.goodreads.com/author/show/7549.Elizabeth_George_Speare]]></link>\n</author>\n</authors>\n</book>\n\n          <book>\n<id>597489</id>\n<title>The Witches of Worm</title>\n<title_without_series>The Witches of Worm</title_without_series>\n<link><![CDATA[https://www.goodreads.com/book/show/597489.The_Witches_of_Worm]]></link>\n<small_image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/50x75-a91bf249278a81aabab721ef782c4a74.png]]></small_image_url>\n<image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png]]></image_url>\n<num_pages>183</num_pages>\n<work>\n<id>3007159</id>\n</work>\n<isbn>0440497272</isbn>\n<isbn13>9780440497271</isbn13>\n<average_rating>3.68</average_rating>\n<ratings_count>1849</ratings_count>\n<publication_year>1986</publication_year>\n<publication_month>2</publication_month>\n<publication_day>1</publication_day>\n<authors>\n<author>\n<id>27</id>\n<name>Zilpha Keatley Snyder</name>\n<link><![CDATA[https://www.goodreads.com/author/show/27.Zilpha_Keatley_Snyder]]></link>\n</author>\n</authors>\n</book>\n\n          <book>\n<id>10372</id>\n<title>Summer of the Monkeys</title>\n<title_without_series>Summer of the Monkeys</title_without_series>\n<link><![CDATA[https://www.goodreads.com/book/show/10372.Summer_of_the_Monkeys]]></link>\n<small_image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/50x75-a91bf249278a81aabab721ef782c4a74.png]]></small_image_url>\n<image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png]]></image_url>\n<num_pages>288</num_pages>\n<work>\n<id>446566</id>\n</work>\n<isbn>0440415802</isbn>\n<isbn13>9780440415800</isbn13>\n<average_rating>4.00</average_rating>\n<ratings_count>10179</ratings_count>\n<publication_year>1998</publication_year>\n<publication_month>12</publication_month>\n<publication_day>29</publication_day>\n<authors>\n<author>\n<id>6810</id>\n<name>Wilson Rawls</name>\n<link><![CDATA[https://www.goodreads.com/author/show/6810.Wilson_Rawls]]></link>\n</author>\n</authors>\n</book>\n\n          <book>\n<id>1661506</id>\n<title>Journey Outside</title>\n<title_without_series>Journey Outside</title_without_series>\n<link><![CDATA[https://www.goodreads.com/book/show/1661506.Journey_Outside]]></link>\n<small_image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/50x75-a91bf249278a81aabab721ef782c4a74.png]]></small_image_url>\n<image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png]]></image_url>\n<num_pages>128</num_pages>\n<work>\n<id>1656307</id>\n</work>\n<isbn>0140305882</isbn>\n<isbn13>9780140305883</isbn13>\n<average_rating>3.53</average_rating>\n<ratings_count>192</ratings_count>\n<publication_year>1979</publication_year>\n<publication_month>7</publication_month>\n<publication_day>26</publication_day>\n<authors>\n<author>\n<id>236137</id>\n<name>Mary Q. Steele</name>\n<link><![CDATA[https://www.goodreads.com/author/show/236137.Mary_Q_Steele]]></link>\n</author>\n</authors>\n</book>\n\n          <book>\n<id>24049</id>\n<title>Survival (Island, #2)</title>\n<title_without_series>Survival</title_without_series>\n<link><![CDATA[https://www.goodreads.com/book/show/24049.Survival]]></link>\n<small_image_url><![CDATA[https://images.gr-assets.com/books/1360057554s/24049.jpg]]></small_image_url>\n<image_url><![CDATA[https://images.gr-assets.com/books/1360057554m/24049.jpg]]></image_url>\n<num_pages>138</num_pages>\n<work>\n<id>1282439</id>\n</work>\n<isbn>0439164575</isbn>\n<isbn13>9780439164573</isbn13>\n<average_rating>3.86</average_rating>\n<ratings_count>3151</ratings_count>\n<publication_year>2001</publication_year>\n<publication_month>7</publication_month>\n<publication_day>1</publication_day>\n<authors>\n<author>\n<id>2130</id>\n<name>Gordon Korman</name>\n<link><![CDATA[https://www.goodreads.com/author/show/2130.Gordon_Korman]]></link>\n</author>\n</authors>\n</book>\n\n          <book>\n<id>186457</id>\n<title><![CDATA[The Fledgling (Hall Family Chronicles #4)]]></title>\n<title_without_series>The Fledgling</title_without_series>\n<link><![CDATA[https://www.goodreads.com/book/show/186457.The_Fledgling]]></link>\n<small_image_url><![CDATA[https://images.gr-assets.com/books/1327215220s/186457.jpg]]></small_image_url>\n<image_url><![CDATA[https://images.gr-assets.com/books/1327215220m/186457.jpg]]></image_url>\n<num_pages>182</num_pages>\n<work>\n<id>1074142</id>\n</work>\n<isbn>0590434519</isbn>\n<isbn13>9780590434515</isbn13>\n<average_rating>3.76</average_rating>\n<ratings_count>1856</ratings_count>\n<publication_year>1981</publication_year>\n<publication_month></publication_month>\n<publication_day></publication_day>\n<authors>\n<author>\n<id>83378</id>\n<name>Jane Langton</name>\n<link><![CDATA[https://www.goodreads.com/author/show/83378.Jane_Langton]]></link>\n</author>\n</authors>\n</book>\n\n          <book>\n<id>857528</id>\n<title>Call It Courage</title>\n<title_without_series>Call It Courage</title_without_series>\n<link><![CDATA[https://www.goodreads.com/book/show/857528.Call_It_Courage]]></link>\n<small_image_url><![CDATA[https://images.gr-assets.com/books/1344390570s/857528.jpg]]></small_image_url>\n<image_url><![CDATA[https://images.gr-assets.com/books/1344390570m/857528.jpg]]></image_url>\n<num_pages>128</num_pages>\n<work>\n<id>842981</id>\n</work>\n<isbn>0689713916</isbn>\n<isbn13>9780689713910</isbn13>\n<average_rating>3.71</average_rating>\n<ratings_count>9556</ratings_count>\n<publication_year>1990</publication_year>\n<publication_month>4</publication_month>\n<publication_day>30</publication_day>\n<authors>\n<author>\n<id>37836</id>\n<name>Armstrong Sperry</name>\n<link><![CDATA[https://www.goodreads.com/author/show/37836.Armstrong_Sperry]]></link>\n</author>\n</authors>\n</book>\n\n          <book>\n<id>4414890</id>\n<title><![CDATA[The Mostly True Adventures of Homer P. Figg]]></title>\n<title_without_series><![CDATA[The Mostly True Adventures of Homer P. Figg]]></title_without_series>\n<link><![CDATA[https://www.goodreads.com/book/show/4414890-the-mostly-true-adventures-of-homer-p-figg]]></link>\n<small_image_url><![CDATA[https://images.gr-assets.com/books/1328842672s/4414890.jpg]]></small_image_url>\n<image_url><![CDATA[https://images.gr-assets.com/books/1328842672m/4414890.jpg]]></image_url>\n<num_pages>224</num_pages>\n<work>\n<id>4463054</id>\n</work>\n<isbn>0439668182</isbn>\n<isbn13>9780439668187</isbn13>\n<average_rating>3.67</average_rating>\n<ratings_count>5924</ratings_count>\n<publication_year>2009</publication_year>\n<publication_month>1</publication_month>\n<publication_day>1</publication_day>\n<authors>\n<author>\n<id>5817</id>\n<name>Rodman Philbrick</name>\n<link><![CDATA[https://www.goodreads.com/author/show/5817.Rodman_Philbrick]]></link>\n</author>\n</authors>\n</book>\n\n          <book>\n<id>784726</id>\n<title>Abel&apos;s Island</title>\n<title_without_series>Abel&apos;s Island</title_without_series>\n<link><![CDATA[https://www.goodreads.com/book/show/784726.Abel_s_Island]]></link>\n<small_image_url><![CDATA[https://images.gr-assets.com/books/1328218024s/784726.jpg]]></small_image_url>\n<image_url><![CDATA[https://images.gr-assets.com/books/1328218024m/784726.jpg]]></image_url>\n<num_pages>117</num_pages>\n<work>\n<id>266053</id>\n</work>\n<isbn>0753581906</isbn>\n<isbn13></isbn13>\n<average_rating>3.89</average_rating>\n<ratings_count>3328</ratings_count>\n<publication_year></publication_year>\n<publication_month></publication_month>\n<publication_day></publication_day>\n<authors>\n<author>\n<id>26874</id>\n<name>William Steig</name>\n<link><![CDATA[https://www.goodreads.com/author/show/26874.William_Steig]]></link>\n</author>\n</authors>\n</book>\n\n          <book>\n<id>175089</id>\n<title>Wild Man Island</title>\n<title_without_series>Wild Man Island</title_without_series>\n<link><![CDATA[https://www.goodreads.com/book/show/175089.Wild_Man_Island]]></link>\n<small_image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/50x75-a91bf249278a81aabab721ef782c4a74.png]]></small_image_url>\n<image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png]]></image_url>\n<num_pages>192</num_pages>\n<work>\n<id>2601776</id>\n</work>\n<isbn>0380733102</isbn>\n<isbn13>9780380733101</isbn13>\n<average_rating>3.71</average_rating>\n<ratings_count>371</ratings_count>\n<publication_year>2003</publication_year>\n<publication_month>4</publication_month>\n<publication_day>1</publication_day>\n<authors>\n<author>\n<id>44589</id>\n<name>Will Hobbs</name>\n<link><![CDATA[https://www.goodreads.com/author/show/44589.Will_Hobbs]]></link>\n</author>\n</authors>\n</book>\n\n          <book>\n<id>278264</id>\n<title>Wringer</title>\n<title_without_series>Wringer</title_without_series>\n<link><![CDATA[https://www.goodreads.com/book/show/278264.Wringer]]></link>\n<small_image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/50x75-a91bf249278a81aabab721ef782c4a74.png]]></small_image_url>\n<image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png]]></image_url>\n<num_pages>240</num_pages>\n<work>\n<id>269883</id>\n</work>\n<isbn>0060739487</isbn>\n<isbn13>9780060739485</isbn13>\n<average_rating>3.62</average_rating>\n<ratings_count>11375</ratings_count>\n<publication_year>2004</publication_year>\n<publication_month>6</publication_month>\n<publication_day>1</publication_day>\n<authors>\n<author>\n<id>12696</id>\n<name>Jerry Spinelli</name>\n<link><![CDATA[https://www.goodreads.com/author/show/12696.Jerry_Spinelli]]></link>\n</author>\n</authors>\n</book>\n\n          <book>\n<id>548609</id>\n<title><![CDATA[Surviving the Applewhites (Applewhites, #1)]]></title>\n<title_without_series>Surviving the Applewhites</title_without_series>\n<link><![CDATA[https://www.goodreads.com/book/show/548609.Surviving_the_Applewhites]]></link>\n<small_image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/50x75-a91bf249278a81aabab721ef782c4a74.png]]></small_image_url>\n<image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png]]></image_url>\n<num_pages>240</num_pages>\n<work>\n<id>1341211</id>\n</work>\n<isbn>0064410447</isbn>\n<isbn13>9780064410441</isbn13>\n<average_rating>3.64</average_rating>\n<ratings_count>9730</ratings_count>\n<publication_year>2003</publication_year>\n<publication_month>12</publication_month>\n<publication_day>23</publication_day>\n<authors>\n<author>\n<id>28006</id>\n<name>Stephanie S. Tolan</name>\n<link><![CDATA[https://www.goodreads.com/author/show/28006.Stephanie_S_Tolan]]></link>\n</author>\n</authors>\n</book>\n\n          <book>\n<id>880225</id>\n<title>Jip: His Story</title>\n<title_without_series>Jip: His Story</title_without_series>\n<link><![CDATA[https://www.goodreads.com/book/show/880225.Jip]]></link>\n<small_image_url><![CDATA[https://images.gr-assets.com/books/1309211501s/880225.jpg]]></small_image_url>\n<image_url><![CDATA[https://images.gr-assets.com/books/1309211501m/880225.jpg]]></image_url>\n<num_pages>192</num_pages>\n<work>\n<id>865519</id>\n</work>\n<isbn>014240411X</isbn>\n<isbn13>9780142404119</isbn13>\n<average_rating>3.63</average_rating>\n<ratings_count>995</ratings_count>\n<publication_year>2005</publication_year>\n<publication_month>6</publication_month>\n<publication_day>2</publication_day>\n<authors>\n<author>\n<id>1949</id>\n<name>Katherine Paterson</name>\n<link><![CDATA[https://www.goodreads.com/author/show/1949.Katherine_Paterson]]></link>\n</author>\n</authors>\n</book>\n\n          <book>\n<id>233330</id>\n<title><![CDATA[A Solitary Blue (Tillerman Cycle, #3)]]></title>\n<title_without_series>A Solitary Blue</title_without_series>\n<link><![CDATA[https://www.goodreads.com/book/show/233330.A_Solitary_Blue]]></link>\n<small_image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/50x75-a91bf249278a81aabab721ef782c4a74.png]]></small_image_url>\n<image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png]]></image_url>\n<num_pages>250</num_pages>\n<work>\n<id>3247916</id>\n</work>\n<isbn>0689863608</isbn>\n<isbn13>9780689863608</isbn13>\n<average_rating>3.95</average_rating>\n<ratings_count>4808</ratings_count>\n<publication_year>2003</publication_year>\n<publication_month>7</publication_month>\n<publication_day>1</publication_day>\n<authors>\n<author>\n<id>7540</id>\n<name>Cynthia Voigt</name>\n<link><![CDATA[https://www.goodreads.com/author/show/7540.Cynthia_Voigt]]></link>\n</author>\n</authors>\n</book>\n\n          <book>\n<id>207153</id>\n<title>Shiloh (Shiloh, #1)</title>\n<title_without_series>Shiloh</title_without_series>\n<link><![CDATA[https://www.goodreads.com/book/show/207153.Shiloh]]></link>\n<small_image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/50x75-a91bf249278a81aabab721ef782c4a74.png]]></small_image_url>\n<image_url><![CDATA[https://s.gr-assets.com/assets/nophoto/book/111x148-bcc042a9c91a29c1d680899eff700a03.png]]></image_url>\n<num_pages>145</num_pages>\n<work>\n<id>1152585</id>\n</work>\n<isbn>0689862229</isbn>\n<isbn13>9780689862229</isbn13>\n<average_rating>3.90</average_rating>\n<ratings_count>60807</ratings_count>\n<publication_year>2003</publication_year>\n<publication_month>5</publication_month>\n<publication_day>1</publication_day>\n<authors>\n<author>\n<id>13608</id>\n<name>Phyllis Reynolds Naylor</name>\n<link><![CDATA[https://www.goodreads.com/author/show/13608.Phyllis_Reynolds_Naylor]]></link>\n</author>\n</authors>\n</book>\n\n  </similar_books>\n</book>\n\n</GoodreadsResponse>`);
}

describe('Goodreads/BookShow', () => {
  describe('#()', () => {

    it('Expects a Goodreads API key string. Throws Error when not provided.', () => {
      chai.expect(() => { return new BookShow(); }).to.throw(Error, /key/i);
    });

  });

  describe('#execute()', () => {
    it('expects a string with a book id.', () => {
      return new BookShow(process.env.GOODREADS_API_KEY).execute()
                                                        .then(_ => { throw new Error('This should have been rejected.'); })
                                                        .catch(err => err.should.match(/ID/i));
    });

    it('resolves to GoodReadsBook object.', () => {
      mockGoodreadsResponse();
      return new BookShow(process.env.GOODREADS_API_KEY).execute(50)
                                                        .then(book => {
                                                            book.id.should.eql('50');
                                                            book.title.should.eql('Hatchet (Brian\'s Saga, #1)');
                                                            book.should.have.a.property('description');
                                                        });
    });
  });


});